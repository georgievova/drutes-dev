\section{mtx\+\_\+int Module Reference}
\label{namespacemtx__int}\index{mtx\+\_\+int@{mtx\+\_\+int}}
\subsection*{Data Types}
\begin{DoxyCompactItemize}
\item 
interface {\bf geti}
\begin{DoxyCompactList}\small\item\em interface pro ziskani prvku \end{DoxyCompactList}\item 
type {\bf matrix\+\_\+int}
\begin{DoxyCompactList}\small\item\em obecna matice \end{DoxyCompactList}\item 
interface {\bf seti}
\begin{DoxyCompactList}\small\item\em interface pro nastaveni prvku \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions/\+Subroutines}
\begin{DoxyCompactItemize}
\item 
subroutine {\bf setverbosity} (A, level)
\item 
subroutine {\bf addmatrix} (a, r, i, j)
\begin{DoxyCompactList}\small\item\em pricte k prvku -\/ kandidat reimplementace v potomkovi \end{DoxyCompactList}\item 
subroutine {\bf initmatrix} (a, n, m)
\begin{DoxyCompactList}\small\item\em rutina pro inicializaci \end{DoxyCompactList}\item 
pure integer(kind=ikind) function {\bf getnmatrix} (a)
\begin{DoxyCompactList}\small\item\em vrati pocet radku \end{DoxyCompactList}\item 
pure integer(kind=ikind) function {\bf getmmatrix} (a)
\begin{DoxyCompactList}\small\item\em vrati pocet sloupcu \end{DoxyCompactList}\item 
subroutine {\bf getrowmatrix} (a, i, v, jj, nelem, mask)
\begin{DoxyCompactList}\small\item\em ziska radek z matice -\/ univerzal -\/ kandidat reimplementace v potomkovi \end{DoxyCompactList}\item 
subroutine {\bf getcolmatrix} (a, j, v, ii, nelem, mask)
\begin{DoxyCompactList}\small\item\em ziska sloupec z matice -\/ kandidat reimplementace v potomkovi \end{DoxyCompactList}\item 
subroutine {\bf spymatrix} (a)
\begin{DoxyCompactList}\small\item\em napodoba matlabovske spy \end{DoxyCompactList}\item 
subroutine {\bf printmatrix} (a, ncol, width, caption)
\begin{DoxyCompactList}\small\item\em vytiskne matici \end{DoxyCompactList}\item 
subroutine {\bf dumpmatrix} (a)
\begin{DoxyCompactList}\small\item\em zakladni dump \end{DoxyCompactList}\item 
integer(kind=ikind) function {\bf nzmatrix} (a)
\begin{DoxyCompactList}\small\item\em vrati pocet nenul v matici -\/ tady n$\ast$m \end{DoxyCompactList}\item 
integer(kind=ikind) function, dimension(\+:), allocatable {\bf mulmatrix} (a, x, count)
\begin{DoxyCompactList}\small\item\em nasobi matici vektorem \end{DoxyCompactList}\item 
integer(kind=ikind) function, dimension(\+:), allocatable {\bf mulmatrixt} (a, x, count)
\begin{DoxyCompactList}\small\item\em nasobi transponovanou matici vektorem \end{DoxyCompactList}\item 
subroutine {\bf copymatrix} (A, B)
\begin{DoxyCompactList}\small\item\em zkopiruje matici -\/ kandidat reimplementace v potomkovi \end{DoxyCompactList}\item 
subroutine {\bf clonematrix} (A, B)
\begin{DoxyCompactList}\small\item\em vytvori prazdnou kopii \end{DoxyCompactList}\item 
subroutine {\bf mulmatrixmatrix} (A, B, C, info)
\begin{DoxyCompactList}\small\item\em A = B$\ast$C !!!!!prepsat. \end{DoxyCompactList}\item 
subroutine {\bf addmatrixmatrix} (A, B)
\item 
subroutine {\bf submatrixmatrix} (A, B)
\begin{DoxyCompactList}\small\item\em A = A -\/ B. \end{DoxyCompactList}\item 
real(kind=rkind) function {\bf normfmatrix} (A)
\begin{DoxyCompactList}\small\item\em spocte Frobeniovu normu matice \end{DoxyCompactList}\item 
class({\bf matrix\+\_\+int}) function, allocatable {\bf smatrix} (A, ii, jj)
\item 
subroutine {\bf read} (A, name)
\item 
subroutine {\bf write} (A, name)
\item 
subroutine, public {\bf mtxtest\+\_\+int} (A)
\item 
subroutine {\bf transpose} (A, B)
\end{DoxyCompactItemize}


\subsection{Function/\+Subroutine Documentation}
\index{mtx\+\_\+int@{mtx\+\_\+int}!addmatrix@{addmatrix}}
\index{addmatrix@{addmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{addmatrix(a, r, i, j)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::addmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(inout)}]{a, }
\item[{integer(kind=ikind), intent(in)}]{r, }
\item[{integer(kind=ikind), intent(in)}]{i, }
\item[{integer(kind=ikind), intent(in)}]{j}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{namespacemtx__int_a1e8620982b379044775defae694de711}


pricte k prvku -\/ kandidat reimplementace v potomkovi 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em a} & matice\\
\hline
\mbox{\tt in}  & {\em i} & souradnice\\
\hline
\mbox{\tt in}  & {\em j} & souradnice\\
\hline
\mbox{\tt in}  & {\em r} & hodnota \\
\hline
\end{DoxyParams}


Definition at line 148 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
148     \textcolor{keywordtype}{use }typy
150     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in out)} :: a
152     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{intent(in)} :: i,j
154     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{intent(in)} :: r
155     \textcolor{keywordtype}{integer(kind=ikind)} :: v
156 
157     v=a%get(i,j)
158     v = v + r
159     \textcolor{keyword}{call }a%set(v,i,j)
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!addmatrixmatrix@{addmatrixmatrix}}
\index{addmatrixmatrix@{addmatrixmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{addmatrixmatrix(\+A, B)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::addmatrixmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(inout)}]{A, }
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{B}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_a03f76f097a5ab64e988df0c9c52e8899}


Definition at line 624 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
624     \textcolor{keywordtype}{use }typy
625     \textcolor{keywordtype}{implicit none}
626     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in out)} :: a
627     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)}      :: b
628     \textcolor{keywordtype}{integer(kind=ikind)}            :: i,j,n,m
629     \textcolor{keywordtype}{integer(kind=ikind)}               :: w1,w2
630     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: rb
631     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: rib
632     \textcolor{keywordtype}{integer(kind=ikind)} :: nrb
633     \textcolor{keywordtype}{logical}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: mask
634 
635     n = a%getn()
636     m = a%getm()
637     \textcolor{keyword}{allocate}(mask(1:m))
638     mask = .true.
639     \textcolor{keywordflow}{do} i=1,n
640         \textcolor{keyword}{call }b%getrow(i,rb,rib,nrb,mask)
641         \textcolor{keywordflow}{do} j=1,nrb
642             \textcolor{keyword}{call }a%add(rb(j),i,rib(j))
643 \textcolor{keyword}{        end }do
644 \textcolor{keyword}{    end }do
645 
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!clonematrix@{clonematrix}}
\index{clonematrix@{clonematrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{clonematrix(\+A, B)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::clonematrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(inout)}]{A, }
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{B}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{namespacemtx__int_aa1c88c66a410fd71ed85ad71b50dc95c}


vytvori prazdnou kopii 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em a} & cil\\
\hline
\mbox{\tt in}  & {\em b} & zdroj \\
\hline
\end{DoxyParams}


Definition at line 555 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
555 
556     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(inout)} :: a
558     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: b
559     \textcolor{keyword}{call }a%init(b%getn(),b%getm())
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!copymatrix@{copymatrix}}
\index{copymatrix@{copymatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{copymatrix(\+A, B)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::copymatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(inout)}]{A, }
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{B}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{namespacemtx__int_afee0e02908be7b30813b9f0304bb39d2}


zkopiruje matici -\/ kandidat reimplementace v potomkovi 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em a} & cil\\
\hline
\mbox{\tt in}  & {\em b} & zdroj \\
\hline
\end{DoxyParams}


Definition at line 528 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
528     \textcolor{comment}{!use pmatools}
529     \textcolor{keywordtype}{implicit none}
531     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(inout)} :: a
533     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: b
534 
535     \textcolor{keywordtype}{integer(kind=ikind)} :: i,j
536     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: v
537     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: ii
538     \textcolor{keywordtype}{integer(kind=ikind)} :: nelem
539 
540     \textcolor{keyword}{call }a%init(b%getn(),b%getm())
541     \textcolor{keywordflow}{do} i=1,b%getn()
542         \textcolor{keyword}{call }b%getrow(i,v,ii,nelem)
543         \textcolor{keywordflow}{do} j=1,nelem
544             \textcolor{keyword}{call }a%set(v(j),i,ii(j))
545 \textcolor{keyword}{        end }do
546         \textcolor{comment}{!do j=1,B%getm()}
547         \textcolor{comment}{!    wrk = B%get(i,j)}
548         \textcolor{comment}{!    call A%set(wrk,i,j)}
549         \textcolor{comment}{!end do}
550 \textcolor{keyword}{    end }do
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!dumpmatrix@{dumpmatrix}}
\index{dumpmatrix@{dumpmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{dumpmatrix(a)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::dumpmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{a}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_abedb3fc28c46c992a6e12f4313748bb7}


zakladni dump 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & dumpovana matice \\
\hline
\end{DoxyParams}


Definition at line 441 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
441     \textcolor{keywordtype}{implicit none}
443     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
444     print *, \textcolor{stringliteral}{"dump matice pro matrix - v zasade k nicemu"}
445     print *, \textcolor{stringliteral}{"n="},a%n,\textcolor{stringliteral}{" m="},a%m
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!getcolmatrix@{getcolmatrix}}
\index{getcolmatrix@{getcolmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{getcolmatrix(a, j, v, ii, nelem, mask)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::getcolmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{a, }
\item[{integer(kind=ikind), intent(in)}]{j, }
\item[{integer(kind=ikind), dimension(\+:), intent(inout), allocatable}]{v, }
\item[{integer(kind=ikind), dimension(\+:), intent(inout), allocatable}]{ii, }
\item[{integer(kind=ikind), intent(out)}]{nelem, }
\item[{logical, dimension(\+:), intent(in), optional}]{mask}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_a3ba282743e11270076679a3c26736bfc}


ziska sloupec z matice -\/ kandidat reimplementace v potomkovi 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & matice\\
\hline
\mbox{\tt in}  & {\em j} & identifikace sloupce\\
\hline
\mbox{\tt in,out}  & {\em v} & hodnoty prvku\\
\hline
\mbox{\tt in,out}  & {\em ii} & radkove indexy\\
\hline
\mbox{\tt out}  & {\em nelem} & pocet prvku vybraneho sloupce\\
\hline
\mbox{\tt in}  & {\em mask} & seznam povolenych indexu \\
\hline
\end{DoxyParams}


Definition at line 279 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
279     \textcolor{keywordtype}{use }typy
280     \textcolor{keywordtype}{implicit none}
282     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
284     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{intent(in)} :: j
286     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{intent(inout)} :: v
288     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{intent(inout)} :: ii
290     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{intent(out)} :: nelem
292     \textcolor{keywordtype}{logical}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{optional}, \textcolor{keywordtype}{intent(in)} :: mask
293     \textcolor{keywordtype}{integer(kind=ikind)} :: i
294     \textcolor{keywordtype}{integer(kind=ikind)} :: w
295     \textcolor{comment}{! dvoufazove}
296     \textcolor{comment}{! spocitat kolik jich bude}
297     nelem = 0
298     \textcolor{keywordflow}{if} ( \textcolor{keyword}{present}(mask)) then
299         \textcolor{keywordflow}{do} i = 1,a%n
300             \textcolor{keywordflow}{if} ( a%get(i,j) /= 0 .and. mask(i)) then
301                 nelem = nelem + 1
302 \textcolor{keyword}{            end }if
303 \textcolor{keyword}{        end }do
304     else
305         \textcolor{keywordflow}{do} i = 1,a%n
306             \textcolor{keywordflow}{if} ( a%get(i,j) /= 0) then
307                 nelem = nelem + 1
308 \textcolor{keyword}{            end }if
309 \textcolor{keyword}{        end }do
310 \textcolor{keyword}{    end }if
311     \textcolor{comment}{! overit misto}
312     \textcolor{keywordflow}{if} ( .not. \textcolor{keyword}{allocated}(v)) then
313         \textcolor{keyword}{allocate}(v(1:nelem))
314     else
315         \textcolor{keywordflow}{if} (nelem > ubound(v,1)) then
316             \textcolor{keyword}{deallocate}(v)
317             \textcolor{keyword}{allocate}(v(1:nelem))
318 \textcolor{keyword}{        end }if
319 \textcolor{keyword}{    end }if
320     \textcolor{keywordflow}{if} ( .not. \textcolor{keyword}{allocated}(ii)) then
321         \textcolor{keyword}{allocate}(ii(1:nelem))
322     else
323         \textcolor{keywordflow}{if} (nelem > ubound(ii,1)) then
324             \textcolor{keyword}{deallocate}(ii)
325             \textcolor{keyword}{allocate}(ii(1:nelem))
326 \textcolor{keyword}{        end }if
327 \textcolor{keyword}{    end }if
328     \textcolor{comment}{! opravdu naplnit}
329     nelem = 0
330     \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(mask)) then
331         \textcolor{keywordflow}{do} i = 1,a%n
332             w = a%get(i,j)
333             \textcolor{keywordflow}{if} ( w /= 0 .and. mask(i)) then
334                 nelem = nelem + 1
335                 v(nelem)  = w
336                 ii(nelem) = i
337 \textcolor{keyword}{            end }if
338 \textcolor{keyword}{        end }do
339     else
340         \textcolor{keywordflow}{do} i = 1,a%n
341             w = a%get(i,j)
342             \textcolor{keywordflow}{if} ( w /= 0 ) then
343                 nelem = nelem + 1
344                 v(nelem)  = w
345                 ii(nelem) = i
346 \textcolor{keyword}{            end }if
347 \textcolor{keyword}{        end }do
348 \textcolor{keyword}{    end }if
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!getmmatrix@{getmmatrix}}
\index{getmmatrix@{getmmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{getmmatrix(a)}]{\setlength{\rightskip}{0pt plus 5cm}pure integer(kind=ikind) function mtx\+\_\+int\+::getmmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{a}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_a8d149b7e2423439a91ad8cc8c86644ba}


vrati pocet sloupcu 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & matice \\
\hline
\end{DoxyParams}


Definition at line 190 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
190     \textcolor{keywordtype}{use }typy
191     \textcolor{keywordtype}{implicit none}
193     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
194     \textcolor{keywordtype}{integer(kind=ikind)} :: res
195     res = a%m
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!getnmatrix@{getnmatrix}}
\index{getnmatrix@{getnmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{getnmatrix(a)}]{\setlength{\rightskip}{0pt plus 5cm}pure integer(kind=ikind) function mtx\+\_\+int\+::getnmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{a}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_a75b5c0869d8d3e0681f57cb29a950404}


vrati pocet radku 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & matice \\
\hline
\end{DoxyParams}


Definition at line 179 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
179     \textcolor{keywordtype}{use }typy
180     \textcolor{keywordtype}{implicit none}
182     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
183     \textcolor{keywordtype}{integer(kind=ikind)} :: res
184     res = a%n
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!getrowmatrix@{getrowmatrix}}
\index{getrowmatrix@{getrowmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{getrowmatrix(a, i, v, jj, nelem, mask)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::getrowmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{a, }
\item[{integer(kind=ikind), intent(in)}]{i, }
\item[{integer(kind=ikind), dimension(\+:), intent(inout), allocatable}]{v, }
\item[{integer(kind=ikind), dimension(\+:), intent(inout), allocatable}]{jj, }
\item[{integer(kind=ikind), intent(out)}]{nelem, }
\item[{logical, dimension(\+:), intent(in), optional}]{mask}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_ae2680fc61f72130376b8013e2a13e9a9}


ziska radek z matice -\/ univerzal -\/ kandidat reimplementace v potomkovi 

vrati jen nenulove prvky z radku, v pripade potreby prealokuje prostor


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & matice\\
\hline
\mbox{\tt in}  & {\em i} & pozadovany radek\\
\hline
\mbox{\tt in,out}  & {\em v} & nenulove hodnoty z radku\\
\hline
\mbox{\tt in,out}  & {\em jj} & sloupcove indexy nenulovych prvku radku\\
\hline
\mbox{\tt out}  & {\em nelem} & pocet nenulovych prvku v radku\\
\hline
\mbox{\tt in}  & {\em mask} & seznam povolenych indexu \\
\hline
\end{DoxyParams}


Definition at line 203 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
203     \textcolor{keywordtype}{use }typy
204     \textcolor{keywordtype}{implicit none}
206     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
208     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{intent(in)} :: i
210     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{intent(inout)} :: v
212     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{intent(inout)} :: jj
214     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{intent(out)} :: nelem
216     \textcolor{keywordtype}{logical}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{optional}, \textcolor{keywordtype}{intent(in)} :: mask
217 
218     \textcolor{keywordtype}{integer(kind=ikind)} :: j
219     \textcolor{keywordtype}{integer(kind=ikind)} :: w
220 
221     \textcolor{comment}{! dvoufazove}
222     \textcolor{comment}{! spocitat kolik jich bude}
223     nelem = 0
224     \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(mask)) then
225         \textcolor{keywordflow}{do} j = 1,a%m
226             \textcolor{keywordflow}{if} ( a%get(i,j) /= 0 .and. mask(j)) then
227                 nelem = nelem + 1
228 \textcolor{keyword}{            end }if
229 \textcolor{keyword}{        end }do
230     else
231         \textcolor{keywordflow}{do} j = 1,a%m
232             \textcolor{keywordflow}{if} ( a%get(i,j) /= 0 ) then
233                 nelem = nelem + 1
234 \textcolor{keyword}{            end }if
235 \textcolor{keyword}{        end }do
236 \textcolor{keyword}{    end }if
237     \textcolor{comment}{! overit misto}
238     \textcolor{keywordflow}{if} ( .not. \textcolor{keyword}{allocated}(v)) then
239         \textcolor{keyword}{allocate}(v(1:nelem))
240     else
241         \textcolor{keywordflow}{if} (nelem > ubound(v,1)) then
242             \textcolor{keyword}{deallocate}(v)
243             \textcolor{keyword}{allocate}(v(1:nelem))
244 \textcolor{keyword}{        end }if
245 \textcolor{keyword}{    end }if
246     \textcolor{keywordflow}{if} ( .not. \textcolor{keyword}{allocated}(jj)) then
247         \textcolor{keyword}{allocate}(jj(1:nelem))
248     else
249         \textcolor{keywordflow}{if} (nelem > ubound(jj,1)) then
250             \textcolor{keyword}{deallocate}(jj)
251             \textcolor{keyword}{allocate}(jj(1:nelem))
252 \textcolor{keyword}{        end }if
253 \textcolor{keyword}{    end }if
254     \textcolor{comment}{! opravdu naplnit}
255     nelem = 0
256     \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(mask)) then
257         \textcolor{keywordflow}{do} j = 1,a%m
258             w = a%get(i,j)
259             \textcolor{keywordflow}{if} ( w /= 0 .and. mask(j)) then
260                 nelem = nelem + 1
261                 v(nelem)  = w
262                 jj(nelem) = j
263 \textcolor{keyword}{            end }if
264 \textcolor{keyword}{        end }do
265     else
266         \textcolor{keywordflow}{do} j = 1,a%m
267             w = a%get(i,j)
268             \textcolor{keywordflow}{if} ( w /= 0) then
269                 nelem = nelem + 1
270                 v(nelem)  = w
271                 jj(nelem) = j
272 \textcolor{keyword}{            end }if
273 \textcolor{keyword}{        end }do
274 \textcolor{keyword}{    end }if
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!initmatrix@{initmatrix}}
\index{initmatrix@{initmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{initmatrix(a, n, m)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::initmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(inout)}]{a, }
\item[{integer(kind=ikind), intent(in)}]{n, }
\item[{integer(kind=ikind), intent(in)}]{m}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_af05eab3dae6580627fecc382eda37aa8}


rutina pro inicializaci 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em a} & matice\\
\hline
\mbox{\tt in}  & {\em n} & rozmery\\
\hline
\mbox{\tt in}  & {\em m} & rozmery \\
\hline
\end{DoxyParams}


Definition at line 164 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
164     \textcolor{keywordtype}{use }typy
165     \textcolor{keywordtype}{implicit none}
167     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in out)} :: a
169     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{intent(in)} :: n,m
170     a%n = n
171     a%m = m
172     \textcolor{comment}{!print *,"initmatrix: konci"}
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!mtxtest\+\_\+int@{mtxtest\+\_\+int}}
\index{mtxtest\+\_\+int@{mtxtest\+\_\+int}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{mtxtest\+\_\+int(\+A)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine, public mtx\+\_\+int\+::mtxtest\+\_\+int (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{A}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_a734a4083f5a8cef776c9f8e535b6abcf}


Definition at line 797 of file mtx\+\_\+int.\+f90.



Referenced by mtx\+\_\+int\+::seti\+::seti().


\begin{DoxyCode}
797     \textcolor{keywordtype}{implicit none}
798     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
799     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{allocatable} :: b,c
800     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(3)} :: ii
801     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(2)} :: jj
802 
803 
804     print *,\textcolor{stringliteral}{"zacinaji testy matic"}
805 
806     \textcolor{keyword}{allocate}(b,source=a)
807     \textcolor{keyword}{allocate}(c,source=a)
808     \textcolor{keyword}{call }b%setverbosity(10)
809     \textcolor{keyword}{call }c%setverbosity(10)
810     ii = (/ 1 ,3, 5 /)
811     jj = (/2,4/)
812     \textcolor{keyword}{call }b%init(5\_ikind,7\_ikind)
813     \textcolor{keyword}{call }b%print()
814     \textcolor{keyword}{call }b%set(2\_ikind,3\_ikind,5\_ikind)
815     \textcolor{keyword}{call }b%set(2\_ikind,5\_ikind,2\_ikind)
816     \textcolor{keyword}{call }b%set(-8\_ikind,1\_ikind,1\_ikind)
817     \textcolor{keyword}{call }b%set(9\_ikind,2\_ikind,2\_ikind)
818     \textcolor{keyword}{call }b%set(-2\_ikind,2\_ikind,7\_ikind)
819     \textcolor{keyword}{call }b%print
820     c = b%submatrix(ii,jj)
821     \textcolor{keyword}{call }c%print
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=276pt]{namespacemtx__int_a734a4083f5a8cef776c9f8e535b6abcf_icgraph}
\end{center}
\end{figure}


\index{mtx\+\_\+int@{mtx\+\_\+int}!mulmatrix@{mulmatrix}}
\index{mulmatrix@{mulmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{mulmatrix(a, x, count)}]{\setlength{\rightskip}{0pt plus 5cm}integer(kind=ikind) function, dimension(\+:), allocatable mtx\+\_\+int\+::mulmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{a, }
\item[{integer(kind=ikind), dimension(\+:), intent(in)}]{x, }
\item[{type({\bf tcount}), intent(inout), optional}]{count}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_a3a70a4d4492f388471b108c191391ff0}


nasobi matici vektorem 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & matice\\
\hline
\mbox{\tt in}  & {\em x} & vektor\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
vysledek
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em count} & pocet operaci \\
\hline
\end{DoxyParams}


Definition at line 461 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
461 
462     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
464     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{intent(in)} :: x
466     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: y
468     \textcolor{keywordtype}{type}(tcount), \textcolor{keywordtype}{intent(inout)}, \textcolor{keywordtype}{optional} :: count
469     \textcolor{keywordtype}{integer(kind=ikind)} :: i,j,nelem
470     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: v
471     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: ii
472 
473 
474     \textcolor{keyword}{allocate}(y(1:a%n))
475     y = 0
476     \textcolor{keywordflow}{do} i=1,a%n
477         \textcolor{keyword}{call }a%getrow(i,v,ii,nelem)
478         \textcolor{keywordflow}{do} j=1,nelem
479             y(i) = y(i) + v(j)*x(ii(j))
480 \textcolor{keyword}{        end }do
481         \textcolor{comment}{!do j=1,a%m}
482         \textcolor{comment}{!    y(i) = y(i) + a%get(i,j)*x(j)}
483         \textcolor{comment}{!end do}
484         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(count)) then
485             count%ad  = count%ad  + nelem
486             count%mul = count%mul + nelem
487 \textcolor{keyword}{        end }if
488 \textcolor{keyword}{    end }do
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!mulmatrixmatrix@{mulmatrixmatrix}}
\index{mulmatrixmatrix@{mulmatrixmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{mulmatrixmatrix(\+A, B, C, info)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::mulmatrixmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(inout)}]{A, }
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{B, }
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{C, }
\item[{type({\bf tcount}), intent(inout), optional}]{info}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{namespacemtx__int_a108c7c2b367a88e2a9e0b811f4252bc7}


A = B$\ast$C !!!!!prepsat. 


\begin{DoxyParams}{Parameters}
{\em A} & vysledna matice \\
\hline
{\em B} & levy operand \\
\hline
{\em C} & pravy operand \\
\hline
\end{DoxyParams}


Definition at line 569 of file mtx\+\_\+int.\+f90.



References typy\+::update\+\_\+info().


\begin{DoxyCode}
569     \textcolor{keywordtype}{use }typy
570     \textcolor{keywordtype}{implicit none}
571     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in out)} :: a
572     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)}     :: b
573     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)}     :: c
574     \textcolor{keywordtype}{type}(tcount),  \textcolor{keywordtype}{intent(in out)}, \textcolor{keywordtype}{optional} :: info
575 
576     \textcolor{keywordtype}{integer(kind=ikind)} :: n,m,p,i,j,k
577     \textcolor{keywordtype}{integer(kind=ikind)} :: wrk
578     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: rd, sl
579     \textcolor{keywordtype}{integer(kind=likind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: rdi, sli
580     \textcolor{keywordtype}{integer(kind=ikind)} :: nrd, nsl
581     \textcolor{keywordtype}{type}(tcount) :: inf1
582     \textcolor{keywordtype}{real} :: t1,t2
583 
584     n = b%getn()
585     m = c%getm()
586     p = b%getm()
587     i = c%getn()
588     j = a%getn()
589     k = a%getm()
590     \textcolor{keyword}{call }cpu\_time(t1)
591     \textcolor{keyword}{call }a%init(j,k)
592     \textcolor{keywordflow}{if} ((p/=i) .or. (j/=n) .or. (m/=k)) print *,\textcolor{stringliteral}{"nesedi rozmery"}
593 \textcolor{comment}{!    do i=1,n}
594 \textcolor{comment}{!        do j=1,m}
595 \textcolor{comment}{!            call A%set(0.0\_rkind,i,j)}
596 \textcolor{comment}{!            wrk = 0}
597 \textcolor{comment}{!            do k=1,p}
598 \textcolor{comment}{!                w1 = B%get(i,k)}
599 \textcolor{comment}{!                w2 = C%get(k,j)}
600 \textcolor{comment}{!                wrk = wrk + w1*w2}
601 \textcolor{comment}{!            end do}
602 \textcolor{comment}{!            call A%set(wrk,i,j)}
603 \textcolor{comment}{!        end do}
604 \textcolor{comment}{!    end do}
605     \textcolor{keywordflow}{do} k=1,p
606         \textcolor{keyword}{call }b%GetCol(k,sl,sli,nsl)
607         \textcolor{keyword}{call }c%GetRow(k,rd,rdi,nrd)
608         \textcolor{comment}{!! pricist opravu}
609         \textcolor{keywordflow}{do} i=1,nrd
610             \textcolor{keywordflow}{do} j=1,nsl
611                 wrk = sl(j)*rd(i)
612                 \textcolor{keyword}{call }a%add(wrk, sli(j), rdi(i))
613 \textcolor{keyword}{            end }do
614 \textcolor{keyword}{        end }do
615         \textcolor{keyword}{call }cpu\_time(t2)
616         inf1%ad = inf1%ad + nrd*nsl
617         inf1%mul = inf1%mul + nrd*nsl
618         inf1%time = inf1%time + t2 - t1
619 \textcolor{keyword}{    end }do
620     \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(info)) \textcolor{keyword}{call }update_info(info,inf1)
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=297pt]{namespacemtx__int_a108c7c2b367a88e2a9e0b811f4252bc7_cgraph}
\end{center}
\end{figure}


\index{mtx\+\_\+int@{mtx\+\_\+int}!mulmatrixt@{mulmatrixt}}
\index{mulmatrixt@{mulmatrixt}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{mulmatrixt(a, x, count)}]{\setlength{\rightskip}{0pt plus 5cm}integer(kind=ikind) function, dimension(\+:), allocatable mtx\+\_\+int\+::mulmatrixt (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{a, }
\item[{integer(kind=ikind), dimension(\+:), intent(in)}]{x, }
\item[{type({\bf tcount}), intent(inout), optional}]{count}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{namespacemtx__int_a199738cacaebce14ce81a82a43290b6a}


nasobi transponovanou matici vektorem 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & matice\\
\hline
\mbox{\tt in}  & {\em x} & vektor\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
vysledek
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em count} & pocet operaci \\
\hline
\end{DoxyParams}


Definition at line 493 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
493     \textcolor{keywordtype}{implicit none}
495     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
497     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{intent(in)} :: x
499     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: y
501     \textcolor{keywordtype}{type}(tcount), \textcolor{keywordtype}{intent(inout)}, \textcolor{keywordtype}{optional} :: count
502     \textcolor{keywordtype}{integer(kind=ikind)} :: i,j,nelem
503     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: v
504     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: ii
505 
506     \textcolor{keyword}{allocate}(y(1:a%m))
507     y = 0
508     \textcolor{keywordflow}{do} i=1,a%n
509         \textcolor{keyword}{call }a%getrow(i,v,ii,nelem)
510         \textcolor{keywordflow}{do} j = 1, nelem
511             y(ii(j)) = y(ii(j)) + v(j)*x(i)
512 \textcolor{keyword}{        end }do
513         \textcolor{comment}{!do j=1,a%m}
514         \textcolor{comment}{!    y(j) = y(j) + a%get(i,j)*x(i)}
515         \textcolor{comment}{!end do}
516         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(count)) then
517             count%ad  = count%ad  + nelem
518             count%mul = count%mul + nelem
519 \textcolor{keyword}{        end }if
520 \textcolor{keyword}{    end }do
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!normfmatrix@{normfmatrix}}
\index{normfmatrix@{normfmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{normfmatrix(\+A)}]{\setlength{\rightskip}{0pt plus 5cm}real(kind=rkind) function mtx\+\_\+int\+::normfmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{A}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_a2d5b18ec8ea8e37c99f698ce7cbfe325}


spocte Frobeniovu normu matice 


\begin{DoxyParams}{Parameters}
{\em A} & zkoumana matice \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
hledana norma 
\end{DoxyReturn}


Definition at line 676 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
676     \textcolor{keywordtype}{use }typy
677     \textcolor{keywordtype}{implicit none}
678     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
679     \textcolor{keywordtype}{real(kind=rkind)} :: y
680     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: rb
681     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: rib
682     \textcolor{keywordtype}{integer(kind=ikind)} :: nrb,i,j
683 
684     y = 0
685     print *,\textcolor{stringliteral}{"normF zacina"}
686     \textcolor{keywordflow}{do} i=1,a%getn()
687         \textcolor{keyword}{call }a%getrow(i,rb,rib,nrb)
688         \textcolor{keywordflow}{do} j=1,nrb
689             y = y + rb(j)*rb(j)
690 \textcolor{keyword}{        end }do
691 \textcolor{keyword}{    end }do
692     y = sqrt(y)
693     print *,\textcolor{stringliteral}{"normF konci"}
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!nzmatrix@{nzmatrix}}
\index{nzmatrix@{nzmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{nzmatrix(a)}]{\setlength{\rightskip}{0pt plus 5cm}integer(kind=ikind) function mtx\+\_\+int\+::nzmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{a}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{namespacemtx__int_af9cdf7c3beb6c607a70211409c120901}


vrati pocet nenul v matici -\/ tady n$\ast$m 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & matice \\
\hline
\end{DoxyParams}


Definition at line 450 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
450     \textcolor{keywordtype}{use }typy
451     \textcolor{keywordtype}{implicit none}
453     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
454     \textcolor{keywordtype}{integer(kind=ikind)} :: res
455     res = a%n*a%m
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!printmatrix@{printmatrix}}
\index{printmatrix@{printmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{printmatrix(a, ncol, width, caption)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::printmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{a, }
\item[{integer(kind=ikind), intent(in), optional}]{ncol, }
\item[{integer(kind=ikind), intent(in), optional}]{width, }
\item[{character(len=$\ast$), intent(in), optional}]{caption}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_af15588ad861dabbdcf520383d6eca9a6}


vytiskne matici 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & matice\\
\hline
\mbox{\tt in}  & {\em ncol} & pozadovany pocet sloupcu tisku, nepovinne\\
\hline
\mbox{\tt in}  & {\em width} & pozadovane sirka sloupce, nepovinne\\
\hline
\mbox{\tt in}  & {\em caption} & nadpis, nepovinne \\
\hline
\end{DoxyParams}


Definition at line 382 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
382     \textcolor{keywordtype}{use }typy
383     \textcolor{keywordtype}{implicit none}
385     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
387     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{intent(in)}, \textcolor{keywordtype}{optional} :: ncol
389     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{intent(in)}, \textcolor{keywordtype}{optional} :: width
391     \textcolor{keywordtype}{character(len=*)}, \textcolor{keywordtype}{intent(in)},    \textcolor{keywordtype}{optional} :: caption
392     \textcolor{keywordtype}{character(len=100)} :: cpt,fmts
393     \textcolor{keywordtype}{integer(kind=ikind)} :: nc
394     \textcolor{keywordtype}{integer(kind=ikind)} :: wd
395     \textcolor{keywordtype}{integer(kind=ikind)} :: i,j, col1,col2
396     \textcolor{keywordtype}{real(kind=rkind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: data
397 
398     \textcolor{keywordflow}{if} ( \textcolor{keyword}{present}(ncol) ) then
399         nc = ncol
400     else
401         nc = 5
402 \textcolor{keyword}{    end }if
403 
404     \textcolor{keywordflow}{if} ( \textcolor{keyword}{present}(width) ) then
405         wd = width
406     else
407         wd = 15
408 \textcolor{keyword}{    end }if
409 
410     \textcolor{keywordflow}{if} ( \textcolor{keyword}{present}(caption) ) then
411         cpt = adjustl(caption)
412     else
413         cpt =\textcolor{stringliteral}{"matice"}
414 \textcolor{keyword}{    end }if
415 
416     \textcolor{keyword}{allocate}(\textcolor{keyword}{data}(1:nc))
417     print *, trim(cpt)
418     print *, \textcolor{stringliteral}{" pocet radku="},a%n, \textcolor{stringliteral}{" pocet sloupcu="}, a%m
419     \textcolor{comment}{!write(fmts,fmt="(i3,a2,i3,a2,i3,a2)") ncol,"(es",width,".",width-8,",a)"}
420     \textcolor{keyword}{write}(unit=fmts,fmt=\textcolor{stringliteral}{"(A1,I0,A2,I0,A1,I0,A1)"})   \textcolor{stringliteral}{"("},nc,\textcolor{stringliteral}{"Es"},wd+8,\textcolor{stringliteral}{"."},wd,\textcolor{stringliteral}{")"}
421     \textcolor{comment}{!print *,fmts}
422     col1 = 1
423     col2 = min(nc,a%getm())
424     do
425         print *,\textcolor{stringliteral}{"tisknu sloupce "},col1,\textcolor{stringliteral}{" az "},col2
426         \textcolor{keywordflow}{do} i=1,a%getn()
427             \textcolor{keywordflow}{do} j=col1,col2
428                 \textcolor{keyword}{data}(j-col1+1) = a%get(i,j)
429 \textcolor{keyword}{            end }do
430             print fmts, \textcolor{keyword}{data}(1:col2-col1+1)
431 \textcolor{keyword}{        end }do
432         col1 = col2+1
433         col2 = min(col2+nc,a%getm())
434         \textcolor{keywordflow}{if} (col1>a%getm()) exit
435 \textcolor{keyword}{    end }do
436 
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!read@{read}}
\index{read@{read}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{read(\+A, name)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::read (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(inout)}]{A, }
\item[{character(len=$\ast$), intent(in)}]{name}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{namespacemtx__int_ad2b0a4099e080b108116609edfa6f20d}


Definition at line 756 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
756     \textcolor{keywordtype}{implicit none}
757     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in out)} :: a
758     \textcolor{keywordtype}{character(len=*)}, \textcolor{keywordtype}{intent(in)} :: name
759     \textcolor{keywordtype}{integer} :: fil
760     \textcolor{keywordtype}{integer(kind=ikind)} :: i,n,m,nz
761     \textcolor{keywordtype}{integer(kind=ikind)} :: wrk
762 
763     \textcolor{keyword}{open}(newunit=fil,file=name)
764     \textcolor{keyword}{read}(fil,*) n,m,nz
765     print *, n, m, nz
766     \textcolor{keyword}{call }a%init(n,m)
767     \textcolor{keywordflow}{do} i=1,nz
768         \textcolor{keyword}{read}(fil,*) n,m,wrk
769         \textcolor{keyword}{call }a%set(wrk,n,m)
770 \textcolor{keyword}{    end }do
771     \textcolor{keyword}{close}(fil)
772     \textcolor{keyword}{call }a%print()
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!setverbosity@{setverbosity}}
\index{setverbosity@{setverbosity}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{setverbosity(\+A, level)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::setverbosity (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(inout)}]{A, }
\item[{integer, intent(in)}]{level}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_a0b32c4406cf337a50e2c74a02dee2fc1}


Definition at line 138 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
138     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in out)} :: a
139     \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(in)} :: level
140     a%verbosity = max(0,min(level,10))
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!smatrix@{smatrix}}
\index{smatrix@{smatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{smatrix(\+A, ii, jj)}]{\setlength{\rightskip}{0pt plus 5cm}class({\bf matrix\+\_\+int}) function, allocatable mtx\+\_\+int\+::smatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{A, }
\item[{integer(kind=ikind), dimension(\+:), intent(in)}]{ii, }
\item[{integer(kind=ikind), dimension(\+:), intent(in)}]{jj}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_af8d1ea193dc2f16d705c98adfd1054fb}


Definition at line 697 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
697     \textcolor{comment}{!! jen na chvili, kvuli pockej}
698     \textcolor{comment}{!use pmatools}
699     \textcolor{keywordtype}{implicit none}
700     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
701     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{allocatable} :: b
702     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{intent(in)} :: ii
703     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{intent(in)} :: jj
704     \textcolor{keywordtype}{integer(kind=ikind)} :: n,m,i,j
705     \textcolor{keywordtype}{integer(kind=ikind)} :: wrk
706     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: v
707     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: is, invi
708     \textcolor{keywordtype}{integer(kind=ikind)} :: nelem
709     \textcolor{keywordtype}{logical}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: mask
710 
711     print *, \textcolor{stringliteral}{"zacina konstrukce submatice"}
712     n = \textcolor{keyword}{size}(ii,1)
713     m = \textcolor{keyword}{size}(jj,1)
714     \textcolor{comment}{!call A%print}
715     \textcolor{comment}{!print *,"pred alokaci"}
716     \textcolor{keyword}{allocate}(b,source=a)
717     \textcolor{comment}{!print *, "alokovano"}
718     \textcolor{keyword}{call }b%init(n,m)
719     \textcolor{comment}{!call B%print(caption="matice B")}
720     \textcolor{comment}{!call A%print(caption="matice A")}
721     \textcolor{keyword}{allocate}(mask(1:a%getm()))
722     \textcolor{keyword}{allocate}(invi(1:a%getm()))
723     \textcolor{comment}{!print *,"maska vytvorena"}
724     mask = .false.
725     mask(jj) = .true.
726     invi = 0
727     \textcolor{keywordflow}{do} i = 1,m
728         invi(jj(i)) = i
729 \textcolor{keyword}{    end }do
730     \textcolor{comment}{!print *,"maska vytvorena a naplnena"}
731     \textcolor{keywordflow}{do} i=1,n
732         \textcolor{comment}{!print *,"i=",i}
733         \textcolor{keyword}{call }a%GetRow(ii(i),v,is,nelem)
734         \textcolor{keywordflow}{do} j = 1,nelem
735             \textcolor{keywordflow}{if} ( mask(is(j)) ) then
736                 \textcolor{comment}{! index tam patri}
737                 \textcolor{keyword}{call }b%set(v(j),i,invi(is(j)))
738 \textcolor{keyword}{            end }if
739 \textcolor{keyword}{        end }do
740         \textcolor{comment}{!!!! dokoncit}
741         \textcolor{comment}{!do j=1,m}
742             \textcolor{comment}{!wrk = A%get(ii(i),jj(j))}
743             \textcolor{comment}{!if ( wrk /= 0.0 ) call B%set(wrk,i,j)}
744             \textcolor{comment}{!call A%print(caption="matice A")}
745             \textcolor{comment}{!call B%print(caption="matice B")}
746             \textcolor{comment}{!print *,i,j}
747         \textcolor{comment}{!end do}
748         \textcolor{comment}{!print *, "i hotovo"}
749 \textcolor{keyword}{    end }do
750     \textcolor{comment}{!call pockej("submatrix hotovo")}
751     \textcolor{comment}{!call B%print(caption="matice B")}
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!spymatrix@{spymatrix}}
\index{spymatrix@{spymatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{spymatrix(a)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::spymatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{a}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_adddbc5fbd63dc09d078e65a16880ae11}


napodoba matlabovske spy 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & matice \\
\hline
\end{DoxyParams}


Definition at line 354 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
354     \textcolor{keywordtype}{use }typy
355     \textcolor{keywordtype}{implicit none}
357     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
358     \textcolor{keywordtype}{integer(kind=ikind)} :: i,j, nz
359     \textcolor{keywordtype}{character(len=a%getm())} :: radek
360     \textcolor{keywordtype}{character(len=8)} :: fmts
361 
362     nz = 0
363     \textcolor{keyword}{write}(fmts,fmt=\textcolor{stringliteral}{"(a2,i5,a1)"}) \textcolor{stringliteral}{"(a"},a%m,\textcolor{stringliteral}{")"}
364     \textcolor{keywordflow}{do} i=1,a%getn()
365         \textcolor{keywordflow}{do} j=1,a%getm()
366             \textcolor{keywordflow}{if} (a%get(i,j) == 0) then
367                 radek(j:j) = \textcolor{stringliteral}{'.'}
368             else
369                 radek(j:j) = \textcolor{stringliteral}{'X'}
370                 nz = nz + 1
371 \textcolor{keyword}{            end }if
372 \textcolor{keyword}{        end }do
373         print fmts,radek
374 \textcolor{keyword}{    end }do
375     print *, \textcolor{stringliteral}{" pocet radek="}, a%getn()
376     print *, \textcolor{stringliteral}{" pocet sloupcu"},a%getm()
377     print *,\textcolor{stringliteral}{"celkovy pocet nenul="},nz
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!submatrixmatrix@{submatrixmatrix}}
\index{submatrixmatrix@{submatrixmatrix}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{submatrixmatrix(\+A, B)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::submatrixmatrix (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(inout)}]{A, }
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{B}
\end{DoxyParamCaption}
)}\label{namespacemtx__int_a2bf68c1a5384259492297a4491084964}


A = A -\/ B. 



Definition at line 650 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
650     \textcolor{keywordtype}{use }typy
651     \textcolor{keywordtype}{implicit none}
652     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in out)} :: a
653     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: b
654     \textcolor{keywordtype}{integer(kind=ikind)}            :: i,j,n,m
655     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: rb
656     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: rib
657     \textcolor{keywordtype}{integer(kind=ikind)} :: nrb
658     \textcolor{keywordtype}{logical}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: mask
659 
660     n = a%getn()
661     m = a%getm()
662     \textcolor{keywordflow}{do} i=1,n
663         \textcolor{keyword}{call }b%getrow(i,rb,rib,nrb)
664         \textcolor{keywordflow}{do} j=1,nrb
665             \textcolor{keyword}{call }a%add(-rb(j),i,rib(j))
666 \textcolor{keyword}{        end }do
667 \textcolor{keyword}{    end }do
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!transpose@{transpose}}
\index{transpose@{transpose}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{transpose(\+A, B)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::transpose (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(inout)}]{A, }
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{B}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{namespacemtx__int_a020a8e6746dc0d2df996ae6cbd8a4544}


Definition at line 825 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
825     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in out)} :: a
826     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)}     :: b
827 
828     \textcolor{keywordtype}{integer(kind=ikind)} :: n,m,i, nelem, j
829     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: ii
830     \textcolor{keywordtype}{integer(kind=ikind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable}    :: v
831 
832     n = b%getn()
833     m = b%getm()
834     \textcolor{keyword}{call }a%init(m,n)
835     \textcolor{keywordflow}{do} i=1,n
836         \textcolor{keyword}{call }b%getrow(i,v,ii,nelem)
837         \textcolor{keywordflow}{do} j=1, nelem
838             \textcolor{keyword}{call }a%set(v(j),ii(j),i)
839 \textcolor{keyword}{        end }do
840 \textcolor{keyword}{    end }do
841 
\end{DoxyCode}
\index{mtx\+\_\+int@{mtx\+\_\+int}!write@{write}}
\index{write@{write}!mtx\+\_\+int@{mtx\+\_\+int}}
\subsubsection[{write(\+A, name)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine mtx\+\_\+int\+::write (
\begin{DoxyParamCaption}
\item[{class({\bf matrix\+\_\+int}), intent(in)}]{A, }
\item[{character(len=$\ast$), intent(in)}]{name}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{namespacemtx__int_a7231fff52be8cf7a8613e85536ca61ef}


Definition at line 776 of file mtx\+\_\+int.\+f90.


\begin{DoxyCode}
776     \textcolor{keywordtype}{implicit none}
777     \textcolor{keywordtype}{class}(matrix\_int), \textcolor{keywordtype}{intent(in)} :: a
778     \textcolor{keywordtype}{character(len=*)}, \textcolor{keywordtype}{intent(in)} :: name
779     \textcolor{keywordtype}{integer} :: fil
780     \textcolor{keywordtype}{integer(kind=ikind)} :: n,m
781     \textcolor{keywordtype}{integer(kind=ikind)} :: wrk
782 
783     \textcolor{keyword}{open}(newunit=fil,file=name)
784     \textcolor{keyword}{write}(fil,*) a%getn(),a%getm(),a%nonzero()
785     \textcolor{keywordflow}{do} n=1,a%getn()
786         \textcolor{keywordflow}{do} m=1,a%getm()
787         wrk = a%get(n,m)
788         \textcolor{keywordflow}{if} (wrk /= 0.0) \textcolor{keyword}{write}(fil,*) n,m,wrk
789 \textcolor{keyword}{        end }do
790 \textcolor{keyword}{    end }do
791     \textcolor{keyword}{close}(fil)
792     \textcolor{keyword}{call }a%print()
\end{DoxyCode}
