\section{pmatools Module Reference}
\label{namespacepmatools}\index{pmatools@{pmatools}}


nektere nastroje  


\subsection*{Data Types}
\begin{DoxyCompactItemize}
\item 
interface {\bf readint}
\end{DoxyCompactItemize}
\subsection*{Functions/\+Subroutines}
\begin{DoxyCompactItemize}
\item 
subroutine, public {\bf getyesno} (message, choice)
\begin{DoxyCompactList}\small\item\em vytiskne zpravu a ziska odpoved \end{DoxyCompactList}\item 
subroutine, public {\bf pockej} (message)
\begin{DoxyCompactList}\small\item\em pozastavi vypocet a pripadne zastavi \end{DoxyCompactList}\item 
subroutine, public {\bf get\+\_\+free\+\_\+unit} (fil)
\begin{DoxyCompactList}\small\item\em nalezne prvni volne cislo zarizeni \end{DoxyCompactList}\item 
subroutine, public {\bf safe\+\_\+open\+\_\+write} (name, fil, mode)
\begin{DoxyCompactList}\small\item\em Otevre soubor k zapisu. \end{DoxyCompactList}\item 
subroutine, public {\bf safe\+\_\+open\+\_\+read} (name, fil, mode)
\begin{DoxyCompactList}\small\item\em Otevre soubor na cteni. \end{DoxyCompactList}\item 
character(len=\+:, kind=chkind) function, allocatable, public {\bf read\+\_\+line} (unit, ierr)
\begin{DoxyCompactList}\small\item\em precte jednu radku ze souboru pripojeneho k jednotce unit. prodpoklada se soubor otevreny s encoding=\textquotesingle{}U\+T\+F-\/8\textquotesingle{} \end{DoxyCompactList}\item 
character(len=\+:) function, allocatable, public {\bf filetostr} (name)
\item 
integer function, public {\bf findsubstr} (Line, Str, mode)
\item 
subroutine {\bf readdir} (Str\+List, Prefix, Files)
\item 
subroutine {\bf readinti} (I, low1, high1, fil1)
\item 
subroutine {\bf readintl} (I, low1, high1, fil1)
\item 
real(kind=rkind) function {\bf dot\+\_\+product} (x, y)
\item 
subroutine {\bf tools\+\_\+test}
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
character, private {\bf dirsep} =\char`\"{}\char`\"{}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
nektere nastroje 

\subsection{Function/\+Subroutine Documentation}
\index{pmatools@{pmatools}!dot\+\_\+product@{dot\+\_\+product}}
\index{dot\+\_\+product@{dot\+\_\+product}!pmatools@{pmatools}}
\subsubsection[{dot\+\_\+product(x, y)}]{\setlength{\rightskip}{0pt plus 5cm}real(kind=rkind) function pmatools\+::dot\+\_\+product (
\begin{DoxyParamCaption}
\item[{real(kind=rkind), dimension(\+:), intent(in)}]{x, }
\item[{real(kind=rkind), dimension(\+:), intent(in)}]{y}
\end{DoxyParamCaption}
)}\label{namespacepmatools_a3bdd52fc0cd0cc30635baeb6f71ec145}


Definition at line 460 of file pmatools.\+f90.


\begin{DoxyCode}
460         \textcolor{keywordtype}{use }typy
461         \textcolor{keywordtype}{implicit none}
462         \textcolor{keywordtype}{real(kind=rkind)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{intent(in)} :: x,y
463         \textcolor{keywordtype}{real(kind=rkind)} :: r
464         \textcolor{keywordtype}{integer(kind=ikind)} :: i
465         r = 0
466         \textcolor{keywordflow}{do} i = lbound(x,1), ubound(x,1)
467             r = r + x(i)*y(i)
468 \textcolor{keyword}{        end }do
\end{DoxyCode}
\index{pmatools@{pmatools}!filetostr@{filetostr}}
\index{filetostr@{filetostr}!pmatools@{pmatools}}
\subsubsection[{filetostr(name)}]{\setlength{\rightskip}{0pt plus 5cm}character(len=\+:) function, allocatable, public pmatools\+::filetostr (
\begin{DoxyParamCaption}
\item[{character(len=$\ast$), intent(in)}]{name}
\end{DoxyParamCaption}
)}\label{namespacepmatools_a66bbbfc692affc4c43333fad08fb4ba1}


Definition at line 246 of file pmatools.\+f90.



References read\+\_\+line(), and safe\+\_\+open\+\_\+read().


\begin{DoxyCode}
246         \textcolor{keywordtype}{use }typy
247         \textcolor{keywordtype}{implicit none}
248         \textcolor{keywordtype}{character(Len=*)}, \textcolor{keywordtype}{intent(in)} :: name
249         \textcolor{keywordtype}{character(len=:)}, \textcolor{keywordtype}{allocatable} :: ret, wrk, name1
250         \textcolor{keywordtype}{integer} :: ierr, fil
251 
252         name1= name
253         \textcolor{keyword}{call }safe_open_read(name1,fil)
254         ret = \textcolor{stringliteral}{""}
255         do
256             wrk = read_line(fil,ierr)
257             \textcolor{keywordflow}{if} ( ierr == 2 ) then
258             print *,\textcolor{stringliteral}{"chybicka se vloudila"}
259             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ierr == 1) then
260                 \textcolor{keywordflow}{exit} \textcolor{comment}{! doslo se na konec souboru}
261 \textcolor{keyword}{            end }if
262             ret = ret // wrk
263 \textcolor{keyword}{        end }do
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacepmatools_a66bbbfc692affc4c43333fad08fb4ba1_cgraph}
\end{center}
\end{figure}


\index{pmatools@{pmatools}!findsubstr@{findsubstr}}
\index{findsubstr@{findsubstr}!pmatools@{pmatools}}
\subsubsection[{findsubstr(\+Line, Str, mode)}]{\setlength{\rightskip}{0pt plus 5cm}integer function, public pmatools\+::findsubstr (
\begin{DoxyParamCaption}
\item[{character(kind=chkind, len=$\ast$), intent(in)}]{Line, }
\item[{character(kind=chkind, len=$\ast$), intent(in)}]{Str, }
\item[{integer, intent(in), optional}]{mode}
\end{DoxyParamCaption}
)}\label{namespacepmatools_add1bb372735372285f7f6bd31fd59abc}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em line} & prohledavany radek\\
\hline
\mbox{\tt in}  & {\em str} & hledany retezec\\
\hline
\mbox{\tt in}  & {\em mode} & kam unisti nalezeny inndex
\begin{DoxyItemize}
\item 0 ... pred prvni znak nalezenoho retezce
\item 1 ... za posledni znak nalezeneho retezce
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
navratova hodnota
\begin{DoxyItemize}
\item nezaporna hodnota nalezena pozice
\item -\/1 ... nalezeny retezec nebyl nalezen !!! pozor\+: nalezena pozice muze byt i o jedna nizsi, nebo vyssi nez jsou rozmery retezce 
\end{DoxyItemize}
\end{DoxyReturn}


Definition at line 267 of file pmatools.\+f90.


\begin{DoxyCode}
267         \textcolor{keywordtype}{use }typy
268         \textcolor{keywordtype}{implicit none}
270         \textcolor{keywordtype}{character(kind=chkind, len=*)}, \textcolor{keywordtype}{intent(in)} :: line
272         \textcolor{keywordtype}{character(kind=chkind, len=*)}, \textcolor{keywordtype}{intent(in)} :: str
276         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{optional}, \textcolor{keywordtype}{intent(in)} :: mode
282 
283 
284         \textcolor{keywordtype}{integer} :: pos, md
285 
286         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(mode)) then
287         md = mode
288         else
289             md = 0
290 \textcolor{keyword}{        end }if
291 
292         pos = index(line,str)
293         \textcolor{keywordflow}{if} ( pos == 0) then
294             pos = -1
295             return
296 \textcolor{keyword}{        end }if
297         \textcolor{keywordflow}{if} (md == 0 ) then
298         pos = pos - 1
299         else
300             pos = pos + len(str)
301 \textcolor{keyword}{        end }if
\end{DoxyCode}
\index{pmatools@{pmatools}!get\+\_\+free\+\_\+unit@{get\+\_\+free\+\_\+unit}}
\index{get\+\_\+free\+\_\+unit@{get\+\_\+free\+\_\+unit}!pmatools@{pmatools}}
\subsubsection[{get\+\_\+free\+\_\+unit(fil)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine, public pmatools\+::get\+\_\+free\+\_\+unit (
\begin{DoxyParamCaption}
\item[{integer, intent(out)}]{fil}
\end{DoxyParamCaption}
)}\label{namespacepmatools_afa6009af93860a1c72792ff9990a4fe5}


nalezne prvni volne cislo zarizeni 

v soucasnosti je lepsi uzit newunit


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em fil} & hledane cislo zarizeni \\
\hline
\end{DoxyParams}


Definition at line 65 of file pmatools.\+f90.



Referenced by mtxiotools\+::read\+\_\+matrix().


\begin{DoxyCode}
65 
66         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(out)} :: fil
67         \textcolor{keywordtype}{logical} :: ex,op
68 
69         fil = 101
70         do
71             \textcolor{keyword}{inquire}(unit=fil,exist=ex,opened=op)
72             \textcolor{keywordflow}{if} ( .not. ex) then
73             fil = fil + 1 \textcolor{comment}{!jednotka vubec neexistuje, tak dalsi}
74             else
75                 \textcolor{keywordflow}{if} ( op ) then
76                 fil = fil + 1 \textcolor{comment}{!existuje, ale je otevrena}
77                 else
78                     \textcolor{keywordflow}{exit}  \textcolor{comment}{!existuje a neni otevrena}
79 \textcolor{keyword}{                end }if
80 \textcolor{keyword}{            end }if
81 \textcolor{keyword}{        end }do
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{namespacepmatools_afa6009af93860a1c72792ff9990a4fe5_icgraph}
\end{center}
\end{figure}


\index{pmatools@{pmatools}!getyesno@{getyesno}}
\index{getyesno@{getyesno}!pmatools@{pmatools}}
\subsubsection[{getyesno(message, choice)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine, public pmatools\+::getyesno (
\begin{DoxyParamCaption}
\item[{character(len=$\ast$), intent(in)}]{message, }
\item[{logical, intent(out)}]{choice}
\end{DoxyParamCaption}
)}\label{namespacepmatools_acfe838441a9f1da3bc0d877f37c151e7}


vytiskne zpravu a ziska odpoved 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & zprava\\
\hline
\mbox{\tt out}  & {\em choice} & odpoved \\
\hline
\end{DoxyParams}


Definition at line 24 of file pmatools.\+f90.



Referenced by pockej(), safe\+\_\+open\+\_\+read(), and safe\+\_\+open\+\_\+write().


\begin{DoxyCode}
24 
25         \textcolor{keywordtype}{character(len=*)}, \textcolor{keywordtype}{intent(in)} :: message
27         \textcolor{keywordtype}{logical}, \textcolor{keywordtype}{intent(out)} :: choice
28         \textcolor{keywordtype}{character(len=1)}     :: z
29         do
30             print *, message
31             print *,\textcolor{stringliteral}{"zvol y nebo n (y..yes, n .. no)"}
32             \textcolor{keyword}{read}(unit=*,fmt=*) z
33             \textcolor{keywordflow}{if} (z == \textcolor{stringliteral}{"y"} .or. z == \textcolor{stringliteral}{"Y"}) then
34                 choice = .true.
35             exit
36             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (z == \textcolor{stringliteral}{"n"} .or. z == \textcolor{stringliteral}{"N"}) then
37                 choice = .false.
38             exit
39             else
40                 print *, \textcolor{stringliteral}{"chybna volba"}
41 \textcolor{keyword}{            end }if
42 \textcolor{keyword}{        end }do
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacepmatools_acfe838441a9f1da3bc0d877f37c151e7_icgraph}
\end{center}
\end{figure}


\index{pmatools@{pmatools}!pockej@{pockej}}
\index{pockej@{pockej}!pmatools@{pmatools}}
\subsubsection[{pockej(message)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine, public pmatools\+::pockej (
\begin{DoxyParamCaption}
\item[{character(len=$\ast$), intent(in), optional}]{message}
\end{DoxyParamCaption}
)}\label{namespacepmatools_a94956a73aafe6a8c31bff6e2d33e0568}


pozastavi vypocet a pripadne zastavi 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & zprava \\
\hline
\end{DoxyParams}


Definition at line 47 of file pmatools.\+f90.



References getyesno().



Referenced by mtxiotools\+::read\+\_\+matrix().


\begin{DoxyCode}
47         \textcolor{keywordtype}{implicit none}
49         \textcolor{keywordtype}{character(len=*)},\textcolor{keywordtype}{optional}, \textcolor{keywordtype}{intent(in)} :: message
50         \textcolor{keywordtype}{logical} :: volba
51         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(message)) then
52         \textcolor{keyword}{call }getyesno(message  // \textcolor{stringliteral}{"Preruseni, pokracovat?"},volba)
53         else
54             \textcolor{keyword}{call }getyesno(\textcolor{stringliteral}{"Preruseni, pokracovat?"},volba)
55 \textcolor{keyword}{        end }if
56         \textcolor{keywordflow}{if} (.not. volba) stop \textcolor{stringliteral}{"Program prerusen v pause"}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=273pt]{namespacepmatools_a94956a73aafe6a8c31bff6e2d33e0568_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=290pt]{namespacepmatools_a94956a73aafe6a8c31bff6e2d33e0568_icgraph}
\end{center}
\end{figure}


\index{pmatools@{pmatools}!read\+\_\+line@{read\+\_\+line}}
\index{read\+\_\+line@{read\+\_\+line}!pmatools@{pmatools}}
\subsubsection[{read\+\_\+line(unit, ierr)}]{\setlength{\rightskip}{0pt plus 5cm}character(len=\+:,kind=chkind) function, allocatable, public pmatools\+::read\+\_\+line (
\begin{DoxyParamCaption}
\item[{integer, intent(in)}]{unit, }
\item[{integer, intent(out), optional}]{ierr}
\end{DoxyParamCaption}
)}\label{namespacepmatools_a13aaee1ff21da73c9d8f90fd37c74ee0}


precte jednu radku ze souboru pripojeneho k jednotce unit. prodpoklada se soubor otevreny s encoding=\textquotesingle{}U\+T\+F-\/8\textquotesingle{} 

\begin{DoxyReturn}{Returns}
fdf
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em unit} & cislo jednotky s pripojenym souborem\\
\hline
\mbox{\tt out}  & {\em ierr} & nepovinna promenna pro chybovou zpravu
\begin{DoxyItemize}
\item 0 ... OK
\item 1 ... konec souboru
\item 2 ... chyba
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
precteny obsah radku 
\end{DoxyReturn}


Definition at line 199 of file pmatools.\+f90.



Referenced by filetostr(), and readdir().


\begin{DoxyCode}
199         \textcolor{keywordtype}{use }typy
200         \textcolor{keywordtype}{implicit none}
201 
203         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(in)} :: unit
208         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(out)}, \textcolor{keywordtype}{optional} :: ierr
210         \textcolor{keywordtype}{character(len=:,kind=chkind)}, \textcolor{keywordtype}{allocatable} :: txt
211 
212         \textcolor{keywordtype}{character(len=2000, kind=chkind)} :: wrk
213         \textcolor{keywordtype}{character(len=2048)} :: msg
214         \textcolor{keywordtype}{integer} :: ln,aln, chyba
215 
216         ln = 0
217         txt = \textcolor{stringliteral}{""}
218         do
219             \textcolor{keyword}{read}(unit=unit,advance=\textcolor{stringliteral}{'no'},fmt=\textcolor{stringliteral}{"(a2000)"},eor=1, err=2,end=3,&
220             size=aln, iostat=chyba, iomsg=msg) wrk
221             txt = txt // wrk
222             ln = ln + aln
223             \textcolor{comment}{!print *, txt}
224             cycle
225             1 continue
226             \textcolor{comment}{!print *, "konec radku"}
227             txt = txt // wrk(1:aln)
228             ln = ln+aln
229             \textcolor{comment}{!print *, "celkem ", ln, " znaku"}
230             \textcolor{comment}{!print *, "text: ",txt}
231             \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(ierr) ) ierr = 0
232             return
233 \textcolor{keyword}{        end }do
234         3 continue
235         \textcolor{comment}{!print *, "konec souboru"}
236         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(ierr)) ierr = 1
237         \textcolor{comment}{!print *, msg}
238         return
239 
240         2 print *, \textcolor{stringliteral}{"chybicka se vloudila"}
241         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(ierr)) ierr = 2
242         print *, chyba, msg
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=276pt]{namespacepmatools_a13aaee1ff21da73c9d8f90fd37c74ee0_icgraph}
\end{center}
\end{figure}


\index{pmatools@{pmatools}!readdir@{readdir}}
\index{readdir@{readdir}!pmatools@{pmatools}}
\subsubsection[{readdir(\+Str\+List, Prefix, Files)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine pmatools\+::readdir (
\begin{DoxyParamCaption}
\item[{type({\bf stringlist}), intent(out)}]{Str\+List, }
\item[{character(len=$\ast$), intent(in), optional}]{Prefix, }
\item[{logical, intent(in), optional}]{Files}
\end{DoxyParamCaption}
)}\label{namespacepmatools_a25e5a93ee7f856fd35c47f89cb63b249}


Definition at line 306 of file pmatools.\+f90.



References dirsep, and read\+\_\+line().


\begin{DoxyCode}
306         \textcolor{keywordtype}{use }typy
307         \textcolor{keywordtype}{implicit none}
308         \textcolor{keywordtype}{type}(stringlist), \textcolor{keywordtype}{intent(out)} :: strlist
309         \textcolor{keywordtype}{character(len=*)}, \textcolor{keywordtype}{intent(in)}, \textcolor{keywordtype}{optional} :: prefix
310         \textcolor{keywordtype}{logical}, \textcolor{keywordtype}{optional}, \textcolor{keywordtype}{intent(in)} :: files
311         \textcolor{keywordtype}{integer} :: fil, i, ierr, cnt, delka, status
312         \textcolor{keywordtype}{character(len=:)}, \textcolor{keywordtype}{allocatable} :: nm,pr1
313         \textcolor{keywordtype}{logical} :: fl
314 
315         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(prefix)) then
316         pr1 = prefix
317         else
318             pr1 = \textcolor{stringliteral}{""}
319 \textcolor{keyword}{        end }if
320         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(files)) then
321         fl = files
322         else
323             fl = .true.
324 \textcolor{keyword}{        end }if
325 
326         \textcolor{keywordflow}{if} (fl) then
327         \textcolor{keyword}{call }system(\textcolor{stringliteral}{"dir /B "} // pr1 // \textcolor{stringliteral}{"> lst.txt"},status)
328         else
329             \textcolor{keyword}{call }system(\textcolor{stringliteral}{"dir /B /AD "} // pr1 // \textcolor{stringliteral}{"> lst.txt"},status)
330 \textcolor{keyword}{        end }if
331         print *,\textcolor{stringliteral}{"status"},status
332         \textcolor{keywordflow}{if} (status==0) then
333             \textcolor{keyword}{open}(newunit=fil, file=\textcolor{stringliteral}{"lst.txt"})
334             cnt = 0
335             do
336                 nm = read_line(fil,ierr)
337                 \textcolor{keywordflow}{if} (ierr==1) exit
338                 cnt = cnt + 1
339                 print *,cnt, nm
340 \textcolor{keyword}{            end }do
341             rewind(fil)
342             strlist%pocet = cnt
343             \textcolor{keyword}{allocate}(strlist%name(1:cnt))
344             \textcolor{keyword}{allocate}(strlist%delka(1:cnt))
345             \textcolor{keywordflow}{do} i=1,cnt
346                 nm = read_line(fil,ierr)
347                 delka = len(nm)
348                 strlist%name(i)(1:delka) = nm
349                 strlist%delka(i) = delka
350 \textcolor{keyword}{            end }do
351         \textcolor{keyword}{close}(fil)
352         else
353             print *,\textcolor{stringliteral}{"prvni pokus nevysel, zkusim linuxovou variantu"}
354             dirsep = \textcolor{stringliteral}{"/"}
355             \textcolor{keyword}{call }system(\textcolor{stringliteral}{"ls -aF "} // pr1 // \textcolor{stringliteral}{"> lst.txt"},status)
356             \textcolor{keywordflow}{if} (status == 0) then
357                 \textcolor{keyword}{open}(newunit=fil, file=\textcolor{stringliteral}{"lst.txt"})
358                 cnt = 0
359                 do
360                     nm = read_line(fil,ierr)
361                     \textcolor{keywordflow}{if} (ierr==1) exit
362                     \textcolor{keywordflow}{if} (nm(len(nm):len(nm))/=\textcolor{stringliteral}{"/"}) then
363                         \textcolor{keywordflow}{if} (fl) then
364                             cnt = cnt + 1
365                             \textcolor{comment}{!print *,cnt, nm}
366 \textcolor{keyword}{                        end }if
367                     else
368                         \textcolor{keywordflow}{if} (.not. fl) then
369                             cnt = cnt + 1
370                             \textcolor{comment}{!print *,cnt, nm}
371 \textcolor{keyword}{                        end }if
372 \textcolor{keyword}{                    end }if
373 
374 \textcolor{keyword}{                end }do
375                 rewind(fil)
376                 strlist%pocet = cnt
377                 \textcolor{comment}{!print *, "pocet radku=",cnt}
378                 \textcolor{keyword}{allocate}(strlist%name(1:cnt))
379                 \textcolor{keyword}{allocate}(strlist%delka(1:cnt))
380                 i = 0
381                 do
382                     nm = read_line(fil,ierr)
383                     delka = len(nm)
384 
385                     \textcolor{comment}{!print *,i,delka, nm}
386                     \textcolor{keywordflow}{if}(nm(delka:delka)/=\textcolor{stringliteral}{"/"}) then
387                         \textcolor{keywordflow}{if} (fl) then
388                             i = i+1
389                             strlist%name(i)(1:delka) = nm
390                             strlist%delka(i) = delka
391 \textcolor{keyword}{                        end }if
392                     else
393                         \textcolor{keywordflow}{if} (.not. fl) then
394                             i = i+1
395                             strlist%name(i)(1:delka-1) = nm
396                             strlist%delka(i) = delka-1
397 \textcolor{keyword}{                        end }if
398 \textcolor{keyword}{                    end }if
399                     \textcolor{keywordflow}{if} (i==cnt) exit
400 \textcolor{keyword}{                end }do
401                 \textcolor{keyword}{close}(fil)
402 
403             else
404                 stop \textcolor{stringliteral}{"neuspech pri cteni adresare"}
405 \textcolor{keyword}{            end }if
406 \textcolor{keyword}{        end }if
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=273pt]{namespacepmatools_a25e5a93ee7f856fd35c47f89cb63b249_cgraph}
\end{center}
\end{figure}


\index{pmatools@{pmatools}!readinti@{readinti}}
\index{readinti@{readinti}!pmatools@{pmatools}}
\subsubsection[{readinti(\+I, low1, high1, fil1)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine pmatools\+::readinti (
\begin{DoxyParamCaption}
\item[{integer, intent(out)}]{I, }
\item[{integer, intent(in), optional}]{low1, }
\item[{integer, intent(in), optional}]{high1, }
\item[{integer, intent(in), optional}]{fil1}
\end{DoxyParamCaption}
)}\label{namespacepmatools_acfa2088008e3eb4661f56e6c71214379}


Definition at line 413 of file pmatools.\+f90.


\begin{DoxyCode}
413         \textcolor{keywordtype}{use }typy
414         \textcolor{keywordtype}{implicit none}
415         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(out)} :: i
416         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(in)}, \textcolor{keywordtype}{optional} ::low1, high1
417         \textcolor{keywordtype}{integer} ::low, high
418         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(in)}, \textcolor{keywordtype}{optional} :: fil1
419         \textcolor{keywordtype}{integer} :: fil
420 
421         fil = 5
422         low = -huge(low)
423         high = huge(high)
424         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(fil1)) fil = fil1
425         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(low1)) low = low1
426         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(high1)) high = high1
427         do
428             \textcolor{keyword}{read}(unit=fil, fmt=*, err = 5) i
429             \textcolor{keywordflow}{if} ((i<low).or. (i>high)) \textcolor{keywordflow}{goto} 5
430             return
431             5 print *, \textcolor{stringliteral}{"ocekavam cele cislo v intervalu <"},low,\textcolor{stringliteral}{","},high,\textcolor{stringliteral}{">"}
432 \textcolor{keyword}{        end }do
\end{DoxyCode}
\index{pmatools@{pmatools}!readintl@{readintl}}
\index{readintl@{readintl}!pmatools@{pmatools}}
\subsubsection[{readintl(\+I, low1, high1, fil1)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine pmatools\+::readintl (
\begin{DoxyParamCaption}
\item[{integer(kind=likind), intent(out)}]{I, }
\item[{integer(kind=likind), intent(in), optional}]{low1, }
\item[{integer(kind=likind), intent(in), optional}]{high1, }
\item[{integer, intent(in), optional}]{fil1}
\end{DoxyParamCaption}
)}\label{namespacepmatools_a939bf47732e9ae684c926fe6897a54e6}


Definition at line 436 of file pmatools.\+f90.


\begin{DoxyCode}
436         \textcolor{keywordtype}{use }typy
437         \textcolor{keywordtype}{implicit none}
438         \textcolor{keywordtype}{integer(kind=likind)}, \textcolor{keywordtype}{intent(out)} :: i
439         \textcolor{keywordtype}{integer(kind=likind)}, \textcolor{keywordtype}{intent(in)}, \textcolor{keywordtype}{optional} ::low1, high1
440         \textcolor{keywordtype}{integer(kind=likind)} ::low, high
441         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(in)}, \textcolor{keywordtype}{optional} :: fil1
442         \textcolor{keywordtype}{integer} :: fil
443 
444         fil = 5
445         low = -huge(low)
446         high = huge(high)
447         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(fil1)) fil = fil1
448         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(low1)) low = low1
449         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(high1)) high = high1
450         do
451             \textcolor{keyword}{read}(unit=fil, fmt=*, err = 5) i
452             \textcolor{keywordflow}{if} ((i<low).or. (i>high)) \textcolor{keywordflow}{goto} 5
453             return
454             5 print *, \textcolor{stringliteral}{"ocekavam cele cislo v intervalu <"},low,\textcolor{stringliteral}{","},high,\textcolor{stringliteral}{">"}
455 \textcolor{keyword}{        end }do
\end{DoxyCode}
\index{pmatools@{pmatools}!safe\+\_\+open\+\_\+read@{safe\+\_\+open\+\_\+read}}
\index{safe\+\_\+open\+\_\+read@{safe\+\_\+open\+\_\+read}!pmatools@{pmatools}}
\subsubsection[{safe\+\_\+open\+\_\+read(name, fil, mode)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine, public pmatools\+::safe\+\_\+open\+\_\+read (
\begin{DoxyParamCaption}
\item[{character(len=$\ast$), intent(inout)}]{name, }
\item[{integer, intent(in)}]{fil, }
\item[{integer, intent(in), optional}]{mode}
\end{DoxyParamCaption}
)}\label{namespacepmatools_a15c0bdc3cabbe05b8c76d56a3f5a83a5}


Otevre soubor na cteni. 

V pripade neexistence zkusit se zeptat Rozhoduje o tom hodnota parametru mode


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em name} & jmeno oteviraneho souboru , muze se zmenit, pokud neexistuje\\
\hline
\mbox{\tt in}  & {\em fil} & cislo jednotky\\
\hline
\mbox{\tt in}  & {\em mode} & mod chovani (neni-\/li zadan plati 0)
\begin{DoxyItemize}
\item 0 neptej se a skonci
\item 1 pozadej o pomoc 
\end{DoxyItemize}\\
\hline
\end{DoxyParams}


Definition at line 147 of file pmatools.\+f90.



References getyesno().



Referenced by filetostr(), and mtxiotools\+::read\+\_\+matrix().


\begin{DoxyCode}
147 
148         \textcolor{keywordtype}{character(len=*)}, \textcolor{keywordtype}{intent(in out)}  :: name
149         \textcolor{keywordtype}{character(len=200)}            :: name1
151         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(in)} :: fil
155         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(in)}, \textcolor{keywordtype}{optional}  :: mode
156         \textcolor{keywordtype}{integer} :: mode1
157         \textcolor{keywordtype}{logical} :: ex, choice
158 
159         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(mode)) then
160         mode1 = mode
161         else
162             mode1 = 0
163 \textcolor{keyword}{        end }if
164         name1 = name
165         do
166             \textcolor{keyword}{inquire}(file=name1, exist=ex)
167             \textcolor{keywordflow}{if} ( .not. ex ) then
168                 md: \textcolor{keywordflow}{if} (mode1==0) then
169                 stop \textcolor{stringliteral}{"soubor neexistuje - nelze pokracovat"}
170                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mode1==1) then
171                     \textcolor{keyword}{call }getyesno(&
172                     \textcolor{stringliteral}{"soubor s udanym jmenem neexistuje. Zadat jine jmeno?"},choice)
173                     chc: \textcolor{keywordflow}{if} (.not. choice) then
174                     stop \textcolor{stringliteral}{"soubor neexistuje - nelze pokracovat"}
175                     else
176                         print *, \textcolor{stringliteral}{"zadej jmeno souboru"}
177                         \textcolor{keyword}{read}(unit=*,fmt=*) name1
178                         print *,\textcolor{stringliteral}{"jmeno:"}, name1
179 \textcolor{keywordflow}{                    end if} chc
180                 else
181                     \textcolor{keyword}{open}(unit=fil, file=name1,action=\textcolor{stringliteral}{"read"})
182                     print *,\textcolor{stringliteral}{"otevreno"}
183                     exit
184 \textcolor{keywordflow}{                end if} md
185             else
186                 print *,\textcolor{stringliteral}{"oteviram"}
187                 \textcolor{keyword}{open}(unit=fil, file=name1, action=\textcolor{stringliteral}{"read"})
188                 exit
189 \textcolor{keyword}{            end }if
190 \textcolor{keyword}{        end }do
191         name = name1
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{namespacepmatools_a15c0bdc3cabbe05b8c76d56a3f5a83a5_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=330pt]{namespacepmatools_a15c0bdc3cabbe05b8c76d56a3f5a83a5_icgraph}
\end{center}
\end{figure}


\index{pmatools@{pmatools}!safe\+\_\+open\+\_\+write@{safe\+\_\+open\+\_\+write}}
\index{safe\+\_\+open\+\_\+write@{safe\+\_\+open\+\_\+write}!pmatools@{pmatools}}
\subsubsection[{safe\+\_\+open\+\_\+write(name, fil, mode)}]{\setlength{\rightskip}{0pt plus 5cm}subroutine, public pmatools\+::safe\+\_\+open\+\_\+write (
\begin{DoxyParamCaption}
\item[{character(len=$\ast$), intent(inout)}]{name, }
\item[{integer, intent(in)}]{fil, }
\item[{integer, intent(in), optional}]{mode}
\end{DoxyParamCaption}
)}\label{namespacepmatools_a3d86f9a1f27d00699cf85be5debb0485}


Otevre soubor k zapisu. 

V pripade pokusu o prepis muze pozadat o schvaleni. Rozhoduje o tom hodnota parametru mode


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em name} & jmeno oteviraneho souboru , muze se zmenit, pokud uz existuje\\
\hline
\mbox{\tt in}  & {\em fil} & cislo jednotky\\
\hline
\mbox{\tt in}  & {\em mode} & mod chovani (neni-\/li zadan plati 0)
\begin{DoxyItemize}
\item 0 neptej se a skonci
\item 1 pozadej o pomoc
\item 2 neptej se a prepis 
\end{DoxyItemize}\\
\hline
\end{DoxyParams}


Definition at line 89 of file pmatools.\+f90.



References getyesno().


\begin{DoxyCode}
89 
90         \textcolor{keywordtype}{character(len=*)}, \textcolor{keywordtype}{intent(in out)}  :: name
91         \textcolor{keywordtype}{character(len=200)}            :: name1
93         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(in)} :: fil
98         \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(in)}, \textcolor{keywordtype}{optional}  :: mode
99         \textcolor{keywordtype}{integer} :: mode1
100         \textcolor{keywordtype}{logical} :: ex, choice
101 
102         \textcolor{keywordflow}{if} (\textcolor{keyword}{present}(mode)) then
103         mode1 = mode
104         else
105             mode1 = 0
106 \textcolor{keyword}{        end }if
107         name1 = name
108         do
109             \textcolor{keyword}{inquire}(file=name1, exist=ex)
110             \textcolor{keywordflow}{if} ( ex ) then
111                 md: \textcolor{keywordflow}{if} (mode1==0) then
112                 stop \textcolor{stringliteral}{"soubor uz existuje, neprepisuji"}
113                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mode1==1) then
114                     \textcolor{keyword}{call }getyesno(&
115                     \textcolor{stringliteral}{" soubor s udanym jmenem existuje. Prepsat?"},choice)
116                     chc: \textcolor{keywordflow}{if} (choice) then
117                         \textcolor{comment}{!! tohle by byt melo}
118                         \textcolor{comment}{!open(unit=fil, file=name1,status="replace",&}
119                         \textcolor{comment}{!action="write")}
120                         \textcolor{comment}{!! zatim  nahradime}
121                         \textcolor{keyword}{call }unlink(name1)
122                         \textcolor{keyword}{open}(unit=fil, file=name1,action=\textcolor{stringliteral}{"write"})
123                     exit
124                     else
125                         print *, \textcolor{stringliteral}{"zadej jmeno souboru"}
126                         \textcolor{keyword}{read}(unit=*,fmt=*) name1
127 \textcolor{keywordflow}{                    end if} chc
128                 else
129                     \textcolor{comment}{!print *, " podivne"}
130                     \textcolor{keyword}{open}(unit=fil, file=name1,status=\textcolor{stringliteral}{"replace"},&
131                     action=\textcolor{stringliteral}{"write"})
132                     exit
133 \textcolor{keywordflow}{                end if} md
134             else
135                 \textcolor{keyword}{open}(unit=fil, file=name1,status=\textcolor{stringliteral}{"new"}, action=\textcolor{stringliteral}{"write"})
136                 exit
137 \textcolor{keyword}{            end }if
138 \textcolor{keyword}{        end }do
139         name = name1
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=289pt]{namespacepmatools_a3d86f9a1f27d00699cf85be5debb0485_cgraph}
\end{center}
\end{figure}


\index{pmatools@{pmatools}!tools\+\_\+test@{tools\+\_\+test}}
\index{tools\+\_\+test@{tools\+\_\+test}!pmatools@{pmatools}}
\subsubsection[{tools\+\_\+test}]{\setlength{\rightskip}{0pt plus 5cm}subroutine pmatools\+::tools\+\_\+test (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{namespacepmatools_adb14d40aeed9b7a40ac726bc7dce321f}


Definition at line 474 of file pmatools.\+f90.



\subsection{Variable Documentation}
\index{pmatools@{pmatools}!dirsep@{dirsep}}
\index{dirsep@{dirsep}!pmatools@{pmatools}}
\subsubsection[{dirsep}]{\setlength{\rightskip}{0pt plus 5cm}character, private pmatools\+::dirsep =\char`\"{}\char`\"{}\hspace{0.3cm}{\ttfamily [private]}}\label{namespacepmatools_a826dac347285c70848a22186248232ec}


Definition at line 6 of file pmatools.\+f90.



Referenced by readdir().


\begin{DoxyCode}
6     \textcolor{keywordtype}{character}, \textcolor{keywordtype}{private} :: dirsep=\textcolor{stringliteral}{""}
\end{DoxyCode}
